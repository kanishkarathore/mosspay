{% extends 'dashboard_layout.html' %}

{% block title %}User Dashboard{% endblock %}

{% block dashboard_content %}
    <h2>Welcome back, {{ user['full_name'].split()[0] if user else 'User' }}!</h2>

    <div class="card moss-balance-card">
        <div class="card-content">
            <span class="card-label">MossCoin Balance</span>
            <span class="card-value">{{ "%.1f"|format(user['moss_coins'] if user else 0.0) }}</span>
            <span class="card-subtitle">Coins earned from green purchases</span>
        </div>
    </div>

    <div class="promo-banner">
        <div class="promo-scroller">
            <span>Get 15% off at Indian Coffee House!</span>
            <span>New Vendor: GreenLeaf Goods just joined!</span>
            <span>Redeem 50 MossCoins for a free coffee</span>
            <span>Refer a friend and you both get 50 coins</span>
            <span>Get 15% off at Indian Coffee House!</span>
            <span>New Vendor: GreenLeaf Goods just joined!</span>
            <span>Redeem 50 MossCoins for a free coffee</span>
            <span>Refer a friend and you both get 50 coins</span>
        </div>
    </div>

    <div class="card green-sprout-card">
        <div class="card-header">
            <h3>My Green Sprout</h3>
        </div>
        <div class="card-content">
            <div class="sprout-icon">
                <span>ðŸŒ³</span>
            </div>
            <div class="sprout-stats">
                <span class="stat-value">12.3 kg</span>
                <span class="stat-label">Total COâ‚‚ Saved</span>
            </div>
            <div class="sprout-stats">
                <span class="stat-value">1</span>
                <span class="stat-label">Trees Planted</span>
            </div>
        </div>
    </div>

    <div class="stats-grid">
        <div class="stat-card">
            <span class="stat-value">12.3 kg</span>
            <span class="stat-label">COâ‚‚ Saved</span>
        </div>
        <div class="stat-card">
            <span class="stat-value">5</span>
            <span class="stat-label">Green Purchases</span>
        </div>
        <div class="stat-card">
            <span class="stat-value">8 days</span>
            <span class="stat-label">Eco-Streak</span>
        </div>
        <div class="stat-card">
            <span class="stat-value">#240</span>
            <span class="stat-label">Rank</span>
        </div>
    </div>
    
    <div class="quick-actions">
        <h4>Quick Actions</h4>
        <a href="{{ url_for('scan_pay') }}" class="btn-scan">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 7V5a2 2 0 0 1 2-2h2"></path><path d="M17 3h2a2 2 0 0 1 2 2v2"></path><path d="M21 17v2a2 2 0 0 1-2 2h-2"></path><path d="M7 21H5a2 2 0 0 1-2-2v-2"></path><line x1="7" y1="12" x2="17" y2="12"></line></svg>
            <span>Scan & Pay</span>
        </a>
        <div class="quick-actions-grid">
            <a href="{{ url_for('log_purchase') }}" class="quick-action-item">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line></svg>
                <span>Log Purchase</span>
            </a>
            <a href="{{ url_for('discover_vendors') }}" class="quick-action-item">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path></svg>
                <span>Discover Vendors</span>
            </a>
            <a href="{{ url_for('redeem') }}" class="quick-action-item">
                 <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6z"></path></svg>
                <span>Redeem Coins</span>
            </a>
        </div>
    </div>
{% endblock %}